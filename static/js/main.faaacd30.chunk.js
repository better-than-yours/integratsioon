(this.webpackJsonpintegratsioon=this.webpackJsonpintegratsioon||[]).push([[0],{102:function(e,t,n){e.exports=n(203)},107:function(e,t,n){},203:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(8),c=n.n(r),l=(n(107),n(40)),i=n.n(l),s=n(47),u=n(64),m=n(29),f=n(65),v=n(239),p=n(234),h=n(66),g=n.n(h),d=n(67),b=n.n(d),E=n(11),j=n(238);var O=function(e){var t=e.course;return o.a.createElement(p.a,{item:!0},o.a.createElement(p.a,{item:!0},o.a.createElement("b",null,t["language course level"])," ",t.Address),o.a.createElement(p.a,{item:!0},t["course start"]," - ",t["course end"]),o.a.createElement(p.a,{item:!0},t["Additional info"]),o.a.createElement(p.a,{item:!0},t["course description"]),o.a.createElement(p.a,{item:!0},"No of form Submissions: ",t["No of form Submissions"]),o.a.createElement(p.a,{item:!0},"Reserve group no of places: ",t["Reserve group no of places"]),o.a.createElement(p.a,{item:!0},"Main group no of places: ",t["Main group no of places"]),o.a.createElement(p.a,{item:!0},Number(t["Main group no of places"])+Number(t["Reserve group no of places"])>Number(t["No of form Submissions"])?o.a.createElement(j.a,{variant:"contained",href:"https://integratsioon.ee".concat(t["Button link"])},"Registration"):o.a.createElement("b",null,"No free places")))},y=n(243),w=n(240),S=n(242),k=n(244),N=n(241);var C=function(e){var t=e.isLoading,n=e.locations,a=e.levels,r=e.filter,c=e.onChangeFilter,l=e.onRefresh;return o.a.createElement(p.a,{container:!0,direction:"row",spacing:2},o.a.createElement(p.a,{item:!0},o.a.createElement(y.a,null,"Locations"),o.a.createElement(w.a,{value:r.location,onChange:function(e){return c("location",String(e.target.value))},disabled:t},null===n||void 0===n?void 0:n.map((function(e){return o.a.createElement(S.a,{key:"location-".concat(e),value:e},e)})))),o.a.createElement(p.a,{item:!0},o.a.createElement(y.a,null,"Levels"),o.a.createElement(w.a,{value:r.level,onChange:function(e){return c("level",String(e.target.value))},disabled:t},null===a||void 0===a?void 0:a.map((function(e){return o.a.createElement(S.a,{key:"level-".concat(e),value:e},e)})))),o.a.createElement(p.a,{item:!0},o.a.createElement(k.a,{control:o.a.createElement(N.a,{checked:r.onlyWithFreePlaces,onChange:function(e){return c("onlyWithFreePlaces",e.target.checked)},disabled:t}),label:"Only with free places"})),o.a.createElement(p.a,{item:!0},o.a.createElement(j.a,{variant:"contained",disabled:t,onClick:function(){return l()}},"Refresh")))};function R(e){return F.apply(this,arguments)}function F(){return(F=Object(f.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=Object(E.f)((function(e){var t=new URLSearchParams(Object(E.e)().search),n=Object(a.useState)({location:t.get("location")||"Tallinn",level:t.get("level")||"A1",onlyWithFreePlaces:!0}),r=Object(m.a)(n,2),c=r[0],l=r[1],h=Object(a.useState)(!0),d=Object(m.a)(h,2),j=d[0],y=d[1],w=Object(a.useState)([]),S=Object(m.a)(w,2),k=S[0],N=S[1],F=Object(a.useState)([]),W=Object(m.a)(F,2),P=W[0],x=W[1],L=Object(a.useState)([]),M=Object(m.a)(L,2),A=M[0],B=M[1],T=Object(a.useState)([]),J=Object(m.a)(T,2),G=J[0],I=J[1];function U(){return $.apply(this,arguments)}function $(){return($=Object(f.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,R("https://api.allorigins.win/raw?url=https://integratsioon.ee/language-courses.json");case 3:t=e.sent,n=t.nodes.map((function(e){return e.node})),x(b()(g()(n,"City/County"))),N(b()(g()(n,"language course level"))),B(n),y(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){0===A.length&&U()}),[A.length]),Object(a.useEffect)((function(){var n;t.get("location")===c.location&&t.get("level")===c.level||(null===(n=e.history)||void 0===n||n.push("?location=".concat(c.location,"&level=").concat(c.level)))}),[c.level,c.location,e.history,t]),Object(a.useEffect)((function(){I(A.filter((function(e){var t=!0;return t&&c.location&&(t=e["City/County"]===c.location),t&&c.level&&(t=e["language course level"]===c.level),t&&c.onlyWithFreePlaces&&(t=Number(e["Main group no of places"])+Number(e["Reserve group no of places"])>Number(e["No of form Submissions"])),t})))}),[A,c.level,c.location,c.onlyWithFreePlaces]),o.a.createElement("div",{className:"App"},o.a.createElement(C,{isLoading:j,locations:P,levels:k,filter:c,onChangeFilter:function(e,t){l(Object(u.a)(Object(u.a)({},c),{},Object(s.a)({},e,t)))},onRefresh:function(){return U()}}),j&&o.a.createElement(v.a,null),o.a.createElement(p.a,{container:!0,direction:"column",spacing:2},null===G||void 0===G?void 0:G.map((function(e){return o.a.createElement(O,{key:e.Nid,course:e})}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=n(63);c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(P.a,null,o.a.createElement(E.a,null,o.a.createElement(W,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[102,1,2]]]);
//# sourceMappingURL=main.faaacd30.chunk.js.map