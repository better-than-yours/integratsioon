(this.webpackJsonpintegratsioon=this.webpackJsonpintegratsioon||[]).push([[0],{101:function(e,t,a){e.exports=a(202)},106:function(e,t,a){},202:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(8),r=a.n(c),l=(a(106),a(40)),i=a.n(l),s=a(47),u=a(64),m=a(29),f=a(65),p=a(234),v=a(243),h=a(240),d=a(242),b=a(244),g=a(241),E=a(238),j=a(239),O=a(66),y=a.n(O),w=a(67),k=a.n(w),N=a(11);function S(e){return C.apply(this,arguments)}function C(){return(C=Object(f.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=Object(N.f)((function(e){var t=new URLSearchParams(Object(N.e)().search),a=Object(n.useState)({location:t.get("location")||"Tallinn",level:t.get("level")||"A1",onlyWithFreePlaces:!0}),c=Object(m.a)(a,2),r=c[0],l=c[1],O=Object(n.useState)(!0),w=Object(m.a)(O,2),C=w[0],R=w[1],W=Object(n.useState)([]),x=Object(m.a)(W,2),P=x[0],F=x[1],M=Object(n.useState)([]),A=Object(m.a)(M,2),B=A[0],L=A[1],T=Object(n.useState)([]),J=Object(m.a)(T,2),G=J[0],I=J[1],U=Object(n.useState)([]),$=Object(m.a)(U,2),q=$[0],z=$[1];function D(){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,S("https://api.allorigins.win/raw?url=https://integratsioon.ee/language-courses.json");case 3:t=e.sent,a=t.nodes.map((function(e){return e.node})),L(k()(y()(a,"City/County"))),F(k()(y()(a,"language course level"))),I(a),R(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t){l(Object(u.a)(Object(u.a)({},r),{},Object(s.a)({},e,t)))}return Object(n.useEffect)((function(){0===G.length&&D()}),[G.length]),Object(n.useEffect)((function(){var a;t.get("location")===r.location&&t.get("level")===r.level||(null===(a=e.history)||void 0===a||a.push("?location=".concat(r.location,"&level=").concat(r.level)))}),[r.level,r.location,e.history,t]),Object(n.useEffect)((function(){z(G.filter((function(e){var t=!0;return t&&r.location&&(t=e["City/County"]===r.location),t&&r.level&&(t=e["language course level"]===r.level),t&&r.onlyWithFreePlaces&&(t=Number(e["Main group no of places"])+Number(e["Reserve group no of places"])>Number(e["No of form Submissions"])),t})))}),[G,r.level,r.location,r.onlyWithFreePlaces]),o.a.createElement("div",{className:"App"},o.a.createElement(p.a,{container:!0,direction:"row",spacing:2},o.a.createElement(p.a,{item:!0},o.a.createElement(v.a,null,"Locations"),o.a.createElement(h.a,{value:r.location,onChange:function(e){return K("location",e.target.value)},disabled:C},null===B||void 0===B?void 0:B.map((function(e){return o.a.createElement(d.a,{key:"location-".concat(e),value:e},e)})))),o.a.createElement(p.a,{item:!0},o.a.createElement(v.a,null,"Levels"),o.a.createElement(h.a,{value:r.level,onChange:function(e){return K("level",e.target.value)},disabled:C},null===P||void 0===P?void 0:P.map((function(e){return o.a.createElement(d.a,{key:"level-".concat(e),value:e},e)})))),o.a.createElement(p.a,{item:!0},o.a.createElement(b.a,{control:o.a.createElement(g.a,{checked:r.onlyWithFreePlaces,onChange:function(e){return K("onlyWithFreePlaces",e.target.checked)},disabled:C}),label:"Only with free places"})),o.a.createElement(p.a,{item:!0},o.a.createElement(E.a,{variant:"contained",disabled:C,onClick:function(){return D()}},"Refresh"))),C&&o.a.createElement(j.a,null),o.a.createElement(p.a,{container:!0,direction:"column",spacing:2},null===q||void 0===q?void 0:q.map((function(e){return o.a.createElement(p.a,{item:!0,key:e.Nid},o.a.createElement(p.a,{item:!0},o.a.createElement("b",null,e["language course level"])," ",e.Address),o.a.createElement(p.a,{item:!0},e["course start"]," - ",e["course end"]),o.a.createElement(p.a,{item:!0},e["Additional info"]),o.a.createElement(p.a,{item:!0},e["course description"]),o.a.createElement(p.a,{item:!0},"No of form Submissions: ",e["No of form Submissions"]),o.a.createElement(p.a,{item:!0},"Reserve group no of places: ",e["Reserve group no of places"]),o.a.createElement(p.a,{item:!0},"Main group no of places: ",e["Main group no of places"]),o.a.createElement(p.a,{item:!0},Number(e["Main group no of places"])+Number(e["Reserve group no of places"])>Number(e["No of form Submissions"])?o.a.createElement(E.a,{variant:"contained",href:"https://integratsioon.ee".concat(e["Button link"])},"Registration"):o.a.createElement("b",null,"No free places")))}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(63);r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(W.a,null,o.a.createElement(N.a,{exact:!0,path:"/"},o.a.createElement(R,null)),o.a.createElement(N.a,{path:"/:location/:level",children:o.a.createElement(R,null)}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[101,1,2]]]);
//# sourceMappingURL=main.05390597.chunk.js.map