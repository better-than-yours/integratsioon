(this.webpackJsonpintegratsioon=this.webpackJsonpintegratsioon||[]).push([[0],{107:function(e,t,n){},204:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),a=n(9),r=n.n(a),i=(n(107),n(41)),s=n.n(i),l=n(48),u=n(66),j=n(30),b=n(67),h=n(240),d=n(235),f=n(68),O=n.n(f),v=n(69),p=n.n(v),g=n(12),m=n(239),x=n(6);var y=function(e){var t=e.course;return Object(x.jsxs)(d.a,{item:!0,children:[Object(x.jsxs)(d.a,{item:!0,children:[Object(x.jsx)("b",{children:t["language course level"]})," ",t.Address]}),Object(x.jsxs)(d.a,{item:!0,children:[t["course start"]," - ",t["course end"]]}),Object(x.jsx)(d.a,{item:!0,children:t["Additional info"]}),Object(x.jsx)(d.a,{item:!0,children:t["course description"]}),Object(x.jsxs)(d.a,{item:!0,children:["No of form Submissions: ",t["No of form Submissions"]]}),Object(x.jsxs)(d.a,{item:!0,children:["Reserve group no of places: ",t["Reserve group no of places"]]}),Object(x.jsxs)(d.a,{item:!0,children:["Main group no of places: ",t["Main group no of places"]]}),Object(x.jsx)(d.a,{item:!0,children:Number(t["Main group no of places"])+Number(t["Reserve group no of places"])>Number(t["No of form Submissions"])?Object(x.jsx)(m.a,{variant:"contained",href:"https://integratsioon.ee".concat(t["Button link"]),children:"Registration"}):Object(x.jsx)("b",{children:"No free places"})})]})},w=n(244),S=n(241),N=n(243),C=n(245),k=n(242);var R=function(e){var t=e.isLoading,n=e.locations,c=e.levels,o=e.filter,a=e.onChangeFilter,r=e.onRefresh;return Object(x.jsxs)(d.a,{container:!0,direction:"row",spacing:2,children:[Object(x.jsxs)(d.a,{item:!0,children:[Object(x.jsx)(w.a,{children:"Locations"}),Object(x.jsx)(S.a,{value:o.location,onChange:function(e){return a("location",String(e.target.value))},disabled:t,children:null===n||void 0===n?void 0:n.map((function(e){return Object(x.jsx)(N.a,{value:e,children:e},"location-".concat(e))}))})]}),Object(x.jsxs)(d.a,{item:!0,children:[Object(x.jsx)(w.a,{children:"Levels"}),Object(x.jsx)(S.a,{value:o.level,onChange:function(e){return a("level",String(e.target.value))},disabled:t,children:null===c||void 0===c?void 0:c.map((function(e){return Object(x.jsx)(N.a,{value:e,children:e},"level-".concat(e))}))})]}),Object(x.jsx)(d.a,{item:!0,children:Object(x.jsx)(C.a,{control:Object(x.jsx)(k.a,{checked:o.onlyWithFreePlaces,onChange:function(e){return a("onlyWithFreePlaces",e.target.checked)},disabled:t}),label:"Only with free places"})}),Object(x.jsx)(d.a,{item:!0,children:Object(x.jsx)(m.a,{variant:"contained",disabled:t,onClick:function(){return r()},children:"Refresh"})})]})};function F(e){return W.apply(this,arguments)}function W(){return(W=Object(b.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=Object(g.f)((function(e){var t=Object(g.e)().search,n=Object(c.useMemo)((function(){return new URLSearchParams(t)}),[t]),o=Object(c.useState)({location:n.get("location")||"Tallinn",level:n.get("level")||"A1",onlyWithFreePlaces:!0}),a=Object(j.a)(o,2),r=a[0],i=a[1],f=Object(c.useState)(!0),v=Object(j.a)(f,2),m=v[0],w=v[1],S=Object(c.useState)([]),N=Object(j.a)(S,2),C=N[0],k=N[1],W=Object(c.useState)([]),M=Object(j.a)(W,2),P=M[0],E=M[1],L=Object(c.useState)([]),A=Object(j.a)(L,2),B=A[0],T=A[1],J=Object(c.useState)([]),G=Object(j.a)(J,2),I=G[0],U=G[1];function $(){return q.apply(this,arguments)}function q(){return(q=Object(b.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,F("https://api.allorigins.win/raw?url=https://integratsioon.ee/language-courses.json");case 3:t=e.sent,n=t.nodes.map((function(e){return e.node})),E(p()(O()(n,"City/County"))),k(p()(O()(n,"language course level"))),T(n),w(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){0===B.length&&$()}),[B.length]),Object(c.useEffect)((function(){var t;n.get("location")===r.location&&n.get("level")===r.level||(null===(t=e.history)||void 0===t||t.push("?location=".concat(r.location,"&level=").concat(r.level)))}),[r.level,r.location,e.history,n]),Object(c.useEffect)((function(){U(B.filter((function(e){var t=!0;return t&&r.location&&(t=e["City/County"]===r.location),t&&r.level&&(t=e["language course level"]===r.level),t&&r.onlyWithFreePlaces&&(t=Number(e["Main group no of places"])+Number(e["Reserve group no of places"])>Number(e["No of form Submissions"])),t})))}),[B,r.level,r.location,r.onlyWithFreePlaces]),Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(R,{isLoading:m,locations:P,levels:C,filter:r,onChangeFilter:function(e,t){i(Object(u.a)(Object(u.a)({},r),{},Object(l.a)({},e,t)))},onRefresh:function(){return $()}}),m&&Object(x.jsx)(h.a,{}),Object(x.jsx)(d.a,{container:!0,direction:"column",spacing:2,children:null===I||void 0===I?void 0:I.map((function(e){return Object(x.jsx)(y,{course:e},e.Nid)}))})]})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=n(65);r.a.render(Object(x.jsx)(o.a.StrictMode,{children:Object(x.jsx)(P.a,{children:Object(x.jsx)(g.a,{children:Object(x.jsx)(M,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[204,1,2]]]);
//# sourceMappingURL=main.70e68885.chunk.js.map