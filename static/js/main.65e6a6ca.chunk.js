(this.webpackJsonpintegratsioon=this.webpackJsonpintegratsioon||[]).push([[0],{101:function(e,t,a){e.exports=a(202)},106:function(e,t,a){},202:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(8),c=a.n(r),l=(a(106),a(40)),i=a.n(l),s=a(47),u=a(64),m=a(29),p=a(65),f=a(234),v=a(243),d=a(240),h=a(242),b=a(244),E=a(241),g=a(238),j=a(239),y=a(66),O=a.n(y),w=a(67),k=a.n(w),N=a(11);function S(e){return C.apply(this,arguments)}function C(){return(C=Object(p.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=Object(N.f)((function(e){var t=Object(N.e)(),a=t.location,r=t.level,c=Object(n.useState)({location:a||"Tallinn",level:r||"A1",onlyWithFreePlaces:!0}),l=Object(m.a)(c,2),y=l[0],w=l[1],C=Object(n.useState)(!0),W=Object(m.a)(C,2),x=W[0],R=W[1],F=Object(n.useState)([]),M=Object(m.a)(F,2),P=M[0],A=M[1],B=Object(n.useState)([]),T=Object(m.a)(B,2),J=T[0],L=T[1],G=Object(n.useState)([]),I=Object(m.a)(G,2),$=I[0],q=I[1],z=Object(n.useState)([]),D=Object(m.a)(z,2),H=D[0],K=D[1];function Q(){return U.apply(this,arguments)}function U(){return(U=Object(p.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,S("https://api.allorigins.win/raw?url=https://integratsioon.ee/language-courses.json");case 3:t=e.sent,a=t.nodes.map((function(e){return e.node})),L(k()(O()(a,"City/County"))),A(k()(O()(a,"language course level"))),q(a),R(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){w(Object(u.a)(Object(u.a)({},y),{},Object(s.a)({},e,t)))}return Object(n.useEffect)((function(){0===$.length&&Q()}),[$.length]),Object(n.useEffect)((function(){var t;(K($.filter((function(e){var t=!0;return t&&y.location&&(t=e["City/County"]===y.location),t&&y.level&&(t=e["language course level"]===y.level),t&&y.onlyWithFreePlaces&&(t=Number(e["Main group no of places"])+Number(e["Reserve group no of places"])>Number(e["No of form Submissions"])),t}))),a!==y.location||r!==y.level)&&(null===(t=e.history)||void 0===t||t.push("/".concat(y.location,"/").concat(y.level)))}),[$,y.level,y.location,y.onlyWithFreePlaces,r,a,e.history]),o.a.createElement("div",{className:"App"},o.a.createElement(f.a,{container:!0,direction:"row",spacing:2},o.a.createElement(f.a,{item:!0},o.a.createElement(v.a,null,"Locations"),o.a.createElement(d.a,{value:y.location,onChange:function(e){return V("location",e.target.value)},disabled:x},null===J||void 0===J?void 0:J.map((function(e){return o.a.createElement(h.a,{key:"location-".concat(e),value:e},e)})))),o.a.createElement(f.a,{item:!0},o.a.createElement(v.a,null,"Levels"),o.a.createElement(d.a,{value:y.level,onChange:function(e){return V("level",e.target.value)},disabled:x},null===P||void 0===P?void 0:P.map((function(e){return o.a.createElement(h.a,{key:"level-".concat(e),value:e},e)})))),o.a.createElement(f.a,{item:!0},o.a.createElement(b.a,{control:o.a.createElement(E.a,{checked:y.onlyWithFreePlaces,onChange:function(e){return V("onlyWithFreePlaces",e.target.checked)},disabled:x}),label:"Only with free places"})),o.a.createElement(f.a,{item:!0},o.a.createElement(g.a,{variant:"contained",disabled:x,onClick:function(){return Q()}},"Refresh"))),x&&o.a.createElement(j.a,null),o.a.createElement(f.a,{container:!0,direction:"column",spacing:2},null===H||void 0===H?void 0:H.map((function(e){return o.a.createElement(f.a,{item:!0,key:e.Nid},o.a.createElement(f.a,{item:!0},o.a.createElement("b",null,e["language course level"])," ",e.Address),o.a.createElement(f.a,{item:!0},e["course start"]," - ",e["course end"]),o.a.createElement(f.a,{item:!0},e["Additional info"]),o.a.createElement(f.a,{item:!0},e["course description"]),o.a.createElement(f.a,{item:!0},"No of form Submissions: ",e["No of form Submissions"]),o.a.createElement(f.a,{item:!0},"Reserve group no of places: ",e["Reserve group no of places"]),o.a.createElement(f.a,{item:!0},"Main group no of places: ",e["Main group no of places"]),o.a.createElement(f.a,{item:!0},Number(e["Main group no of places"])+Number(e["Reserve group no of places"])>Number(e["No of form Submissions"])?o.a.createElement(g.a,{variant:"contained",href:"https://integratsioon.ee".concat(e["Button link"])},"Registration"):o.a.createElement("b",null,"No free places")))}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=a(63);c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(x.a,null,o.a.createElement(N.a,{exact:!0,path:"/"},o.a.createElement(W,null)),o.a.createElement(N.a,{path:"/:location/:level",children:o.a.createElement(W,null)}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[101,1,2]]]);
//# sourceMappingURL=main.65e6a6ca.chunk.js.map